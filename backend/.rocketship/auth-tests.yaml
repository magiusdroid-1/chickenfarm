name: "Backend Auth Tests"
vars:
  base_url: "https://httpbin.org"

tests:
  - name: "Basic auth success"
    steps:
      - name: "Test basic authentication"
        plugin: "http"
        config:
          method: "GET"
          url: "{{ .vars.base_url }}/basic-auth/testuser/testpass"
          headers:
            Authorization: "Basic dGVzdHVzZXI6dGVzdHBhc3M="
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: ".authenticated"
            expected: true

  - name: "Bearer token header"
    steps:
      - name: "Send bearer token"
        plugin: "http"
        config:
          method: "GET"
          url: "{{ .vars.base_url }}/bearer"
          headers:
            Authorization: "Bearer my-test-token-123"
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: ".authenticated"
            expected: true
