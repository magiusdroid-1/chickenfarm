name: "User Submission Journey"
vars:
  base_url: "https://httpbin.org"

tests:
  - name: "User submits a support request"
    steps:
      - name: "User sends support ticket with details"
        plugin: "http"
        config:
          method: "POST"
          url: "{{ .vars.base_url }}/post"
          headers:
            Content-Type: "application/json"
          body: '{"message": "hello world"}'
        assertions:
          - type: "status_code"
            expected: 200

  - name: "User creates a new listing"
    steps:
      - name: "User publishes new listing with metadata"
        plugin: "http"
        config:
          method: "POST"
          url: "{{ .vars.base_url }}/post"
          headers:
            Content-Type: "application/json"
          body: '{"name": "rocketship", "version": "1.0"}'
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: ".json.name"
            expected: "rocketship"
