name: "User Payment Journey"
vars:
  base_url: "https://httpbin.org"

tests:
  - name: "User initiates payment"
    steps:
      - name: "Create payment intent"
        plugin: "http"
        config:
          method: "POST"
          url: "{{ .vars.base_url }}/post"
          body: |
            {"amount": 1000, "currency": "usd"}
        assertions:
          - type: "status_code"
            expected: 200

  - name: "User confirms payment"
    steps:
      - name: "Confirm payment"
        plugin: "http"
        config:
          method: "POST"
          url: "{{ .vars.base_url }}/post"
          body: |
            {"payment_id": "pi_123", "confirm": true}
        assertions:
          - type: "status_code"
            expected: 200
